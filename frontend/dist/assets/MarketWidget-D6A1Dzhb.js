import{r as s,f as U,j as e,C as E,S as k}from"./index-gsO5dXBr.js";const w=["BTCUSDT","ETHUSDT","SOLUSDT","AVAXUSDT","XRPUSDT","DOGEUSDT"],L={BTCUSDT:"Bitcoin",ETHUSDT:"Ethereum",SOLUSDT:"Solana",AVAXUSDT:"Avalanche",XRPUSDT:"XRP",DOGEUSDT:"Dogecoin"},A=({symbols:a=w,interval:l="1h",refreshMs:d=45e3})=>{const[u,y]=s.useState([]),[m,h]=s.useState(!0),[n,f]=s.useState(null),[b,v]=s.useState(null),[g,j]=s.useState(!1),i=s.useCallback(async(t={})=>{const{silent:p=!1}=t;p?j(!0):h(!0),f(null);try{const o=await Promise.all(a.map(async c=>{try{const r=await U(c,l);return{symbol:r.symbol,price:r.price??null,time:r.time??null,interval:l}}catch(r){const N=r instanceof Error?r.message:"unknown error";return{symbol:c,price:null,time:null,interval:l,error:N}}}));y(o),v(new Date)}catch(o){const c=o instanceof Error?o.message:"Failed to load prices";f(c)}finally{h(!1),j(!1)}},[l,a]),T=s.useMemo(()=>a.join(","),[a]),D=s.useMemo(()=>a.slice(0,6),[a]);s.useEffect(()=>{if(i(),!d)return;const t=window.setInterval(()=>{i({silent:!0})},d);return()=>window.clearInterval(t)},[i,d,T]);const x=s.useMemo(()=>u.slice().sort((t,p)=>t.symbol.localeCompare(p.symbol)),[u]),S=s.useMemo(()=>x.some(t=>t.price!==null||t.error),[x]);return e.jsxs(E,{className:"h-full bg-gradient-to-br from-slate-900/70 via-slate-900/40 to-slate-950",children:[e.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Market Watch"}),e.jsx("h2",{className:"mt-1 text-xl font-semibold text-white",children:"Spot Snapshot"}),e.jsxs("p",{className:"text-xs text-slate-500",children:["Interval • ",l]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-[11px] text-slate-400",children:[b&&e.jsxs("span",{children:["Updated ",b.toLocaleTimeString()]}),e.jsx("button",{type:"button",onClick:()=>void i({silent:!0}),className:"rounded-full border border-slate-700 px-3 py-1 font-semibold text-slate-300 transition hover:border-primary hover:text-primary disabled:opacity-50",disabled:g,children:g?"Refreshing…":"Refresh"})]})]}),m&&e.jsx("div",{className:"mt-5 space-y-3",children:D.map(t=>e.jsx(k,{className:"h-16 w-full"},t))}),n&&e.jsx("div",{className:"mt-4 rounded border border-rose-500/30 bg-rose-500/10 p-3 text-sm text-rose-200",children:n}),!m&&!n&&S&&e.jsx("div",{className:"mt-5 space-y-3",children:x.map(t=>e.jsxs("div",{className:"flex items-center justify-between gap-4 rounded-xl border border-slate-800/50 bg-slate-900/40 px-4 py-3 transition hover:border-primary/60 hover:bg-slate-900/70",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-white",children:L[t.symbol]??t.symbol}),e.jsxs("div",{className:"mt-1 flex flex-wrap items-center gap-2 text-[11px] text-slate-500",children:[e.jsx("span",{children:t.symbol}),t.time&&e.jsxs("span",{children:["• ",t.time.toLocaleTimeString()]}),t.error&&e.jsxs("span",{className:"text-rose-300",children:["• ",t.error]})]})]}),e.jsx("p",{className:"text-lg font-semibold text-accent",children:t.price?t.price.toLocaleString(void 0,{maximumFractionDigits:2}):"--"})]},t.symbol))}),!m&&!n&&!S&&e.jsx("div",{className:"mt-5 rounded border border-slate-800/60 bg-slate-900/50 p-4 text-sm text-slate-400",children:"No market data yet. Try refreshing or adjust the symbol list."})]})};export{A as default};
